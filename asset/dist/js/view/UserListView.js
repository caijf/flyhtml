define(["backbone","collection/UserCollection","text!template/userList.html","view/asideView","util"],function(e,t,n,r,i){var s=i.template(n),o=e.View.extend({tagName:"a",template:_.template(s.item("user-item-template")),className:"list-group-item",render:function(){var e=this.model;return this.$el.attr({href:"/users/"+e.get("username"),"data-ajax":""}).html(this.template(e.toJSON())),this.el}}),u=e.View.extend({el:$("#main"),initialize:function(e){this.collection=new t,this.collection.on("sync",this.render,this),this.collection.fetch({data:e}).done(function(){i.alert.hide(1)})},render:function(e,t){this.$el.html(s.item("layout-template")),this.$users=this.$(".list-group"),this.collection.forEach(this.addOne,this),console.log(this.collection),i.paginator.render({count:t.count,page:t.page,url:"/users/p",perPage:t.perPage}).insertAfter(this.$users),new r({el:this.$(".aside")})},addOne:function(e){this.$users.append((new o({model:e})).render())}});return u});