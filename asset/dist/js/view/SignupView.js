define(["backbone","text!template/signup.html","model/UserModel"],function(e,t,n){var r=e.View.extend({className:"modal-dialog modal-signup",events:{"click .js-create":"create","blur input":"setVal","submit form":"create"},initialize:function(){this.model=new n,this.model.on("invalid",this.inputFail,this),this.model.on("change",this.inputSucc,this)},render:function(){return this.$el.html(t),this.inputTemplate=this.$("#input-msg-template").html(),this.el},inputFail:function(e,t){for(var n in t)this.$("[name="+n+"]").siblings(".help-inline").html(_.template(this.inputTemplate,{error:t[n]}))},inputSucc:function(e,t){for(var n in e.changed)this.$("[name="+n+"]").siblings(".help-inline").html(_.template(this.inputTemplate,{error:""}))},setVal:function(e){var t=$(e.target),n=t.attr("name"),r={};r[n]=$.trim(t.val()),this.model.set(r,{validate:!0})},create:function(e){e.preventDefault(),this.$("input").trigger("blur"),this.$(".text-danger").length||this.model.save().done(_.bind(this.signupSuccess,this))},signupSuccess:function(e,t){this.$(".modal-body").html($("#signup-success-template").html()),this.$(".modal-footer").remove()}});return r});