define(["backbone"],function(e){var t=e.Model.extend({urlRoot:"/pjax/users",validate:function(e,t){var n={},r;for(var i in e)r=this.validateItem(i,e[i]),r&&(n[i]=r);return!_.isEmpty(n)&&n},initialize:function(){var e=this;this.validators={username:function(t){if(!t)return"Please enter your username";if(t.length<5)return"Your username is too short";if(!/^\w{5,15}$/.test(t))return"Username only include numbers and letters";t!=e.get("username")&&$.getJSON("/user/check?username="+t).done(function(t){t.error&&e.trigger("invalid",e,{username:"Your username is already exist"})})},email:function(t){if(!t)return"Please enter your email";if(!/^[0-9a-z_][_.0-9a-z-]{0,31}@([0-9a-z][0-9a-z-]{0,30}\.){1,4}[a-z]{2,4}$/.test(t))return"Please enter a valid email address";t!=e.get("email")&&$.getJSON("/user/check?email="+t).done(function(t){t.error&&e.trigger("invalid",e,{email:"Your email is already exist"})})},password:function(e){if(!e)return"Please enter your password";if(e.length<5)return"Your password is too short";if(!/^[a-zA-Z0-9~!@#$%^&*]{6,16}$/.test(e))return"Please enter a valid password"}}},validateItem:function(e,t){return this.validators[e]?this.validators[e](t):!1}});return t});