define(["model/session","util","view/LoginView","view/SignupView"],function(e,t,n,r){var i=function(){var i=$("body");i.on("click","a[data-ajax]",function(e){e.preventDefault(),t.store.set("referrer",location.pathname),Backbone.history.navigate($(this).attr("href"),!0)}),e.isGuest()?(e.on("login",function(){t.modal.show((new n).render())}),e.on("signup",function(){t.modal.show((new r).render())}),i.on("click",".js-login",function(){e.trigger("login")}).on("click",".js-signup",function(){e.trigger("signup")})):i.on("click",".js-logout",function(){e.logout()}),$(document).ajaxError(function(n,r,i){var s=r.status;switch(s){case 0:t.alert.fail("The server is not responding or is not reachable, try again later");break;case 401:e.trigger("login");break;case 500:t.alert.fail("Internal Server Error, you can try again later");break;default:}})};return i});